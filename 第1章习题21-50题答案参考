21. 两个网络都可以提供可靠的、面向连接的服务。其中一个提供可靠的字节流，另一个提供可靠的消息流。这两者是否相同？如果你认为这两者相同，为什么要有这样的区别？如果不相同，请给出一个例子说明它们如何不同。

解答：不相同。在消息流中网络保持对消息边界的跟踪；而在字节流中网络不做这样的跟踪。例子：一个进程向一条连接写了1024字节，稍后又写了另外1024字节。那么接收方共读了2048字节。对于消息流，接收方将得到两个消息，每个消息1024字节。而对于字节流，消息边界不被识别，接收方把全部2048个字节当作一个整体，在此已经体现不出原先有两个不同消息的事实。

22. 在讨论网络协议的时候，“协商”意味着什么？请给出一个例子。

解答：协商是要双方就通信期间将使用的某些参数或值达成一致。最大分组长度就是一个例子。

23. 图1-31显示了一个服务，该图是否还隐含着其他的服务？如果有，在哪里？如果没有，说明为什么没有。

解答：还隐含了第k-1层对第k层的服务。

24. 在有些网络中，数据链路层处理传输错误的做法是请求发送方重传被损坏的帧。如果一帧被损坏的概率为$p$，发送一帧需要的平均传输次数是多少？假设确认帧永远不会丢失。

解答：一帧被破坏的概率为p，所以一帧无损坏到达接收方的概率为1-p，一帧第i次无损坏到达接收方，而前i-1次都都被损坏的概率为：P_i=(1-p)p^(i-1),
所以，一帧无损坏地到达接收方需要的平均发送次数为：

∑_(i=1)^∞▒〖iP_i 〗=∑_(i=1)^∞▒〖i(1-p)p^(i-1) 〗=(1-p) ∑_(i=1)^∞▒〖ip^(i-1) 〗=(1-p)  1/(1-p)^2 =1/(1-p)

25. OSI模型和TCP/IP 模型中哪些层负责处理下面的事项？
（a）将要传输的比特流分割成帧。
（b）确定子网使用哪一条路径。
解答[1]：在OSI模型中：
（a）的功能是数据链路层负责的，发送方把输入数据分装在数据帧里（典型的帧为几百字节或几千字节），按顺序传送各帧，并且有可能要收回接收方回送的确认帧。因为物理层仅仅接收和传送比特流，并不关心它的意义和结构，所以只能依赖各链路层来产生和识别帧边界。
（b）的功能由网络层实现，网络层关系到子网的运行控制，其中一个关键问题是确定分组从源端到达目的端的路由。
在TCP/IP模型中：
如果根据TCP/IP模型与OSI 模型对比，可以发现网络接口层似乎与OSI的数据链路层和物理层相对应，承担（a）事项的应该是TCP/IP模型的网络接口层，但是实际上TCP/IP本身并没有真正描述这一部分，只是指出主机必须使用某种协议与网络连接，以便能在其上传递IP（互联网络协议）分组。网络接口层负责从主机或节点接收IP分组，并把它们发送到指定的物理网络上。
（b）事项由互联网络层实现，互联网络层的功能就是把IP分组发送到应该去的地方，选择分组路由和避免阻塞是这里主要的设计问题。

26. 如果数据链路层上交换的数据单元称为帧，网络层上交换的数据单元称为数据包，那么，是帧封装了数据包，还是数据包封装了帧？请解释你的答案。
解答[1]：是帧封装了数据包。当一个数据包到达数据链路层时，整个数据包，包括包头和数据，都被用作一个帧的数据域。这就好像把整个数据包放在一个信封内，因此是说帧封装了数据包。

27. 请考虑一个6层协议的层次结构，其中第1层是最底层，第6层是最高层。一个应用程序发送消息M，将它传递给第6层。所有的偶数层都在其有效载荷中附加一个尾，所有的奇数层都在其有效载荷中附加一个头。请按照在网络上的发送顺序依次画出头、尾和原始消息M。
解答：最终的消息如下：
 

28. 一个系统具有n层协议的层次结构。应用层产生长度为M字节的消息，在每一层加上长度为h字节的头。头所占的网络带宽比例是多少？
解答[1]：n层协议每层加上长度为h字节的头，在每个消息上附加的头字节总数等于nh，所以头所占的网络带宽比例是：nh/(M+nh)。

29. 请举出一个设备同时连接到两个网络的5个例子，解释为什么这是有用的。
解答[6][7]：
	Hub(集线器)：集线器将多个计算机网络设备连接在一起，还充当中继器的作用，因为它会放大经过连接电缆后长途传输后恶化的信号。集线器是网络连接设备家族中最简单的，因为它将LAN组件用相同的协议连接起来。
	Switch(交换机)：维护内部网络中节点的有限路由信息，交换机具有多个端口，每个端口（port）都具有桥接功能，并且允许连接到集线器或路由器等系统。
	Router(路由器)：连接几个不同的网络，将数据从一个网络中的一个设备传送到另一个网络中的另一个设备。
	Gateway(网关)：网关通常在OSI模型的运输和会话层上工作。在运输层及以上，有许多来自不同供应商的协议和标准。网关用于与他们打交道。网关提供网络技术之间的翻译，例如开放系统互连（OSI）和传输控制协议/Internet协议（TCP/IP）。因此，网关连接两个或多个自主网络，每个网络都有其自己的路由算法，协议，拓扑，域名服务以及网络管理程序和策略。网关执行路由器的所有功能，甚至更多。事实上，带有附加转换功能的路由器就是网关。在不同的网络技术之间进行转换的功能称为协议转换器。
	Access Point(接入点)：虽然接入点(AP)在技术上可以包括有线或无线连接，但它通常指的是无线设备。AP工作在OSI的第二层，即数据链路层，它既可以作为连接标准有线网络到无线设备的桥接器，也可以作为从一个接入点到另一个接入点传递数据传输的路由器。

30. 图1-12（b）中的子网被设计用来对抗核战争。需要多少颗炸弹才能将这些节点炸成两个互不相连的集合？假设任何一颗炸弹都可以摧毁一个节点以及所有与它相连的链路。
解答[1]：如图，至少需要三颗炸弹，才能将它们炸成互不相连的两个集合。
进一步可以发现，两颗炸弹炸任意位置，这个网络的节点都不会断连。

31. Internet的规模差不多每隔18个月翻一番。虽然没有人能够确切地知道具体的数字，但是估计2018年Internet上的主机数目为10亿台。请利用这些数据计算出2027年Internet上预计会有多少台主机。你相信你的结论吗？请说明你为什么相信或者为什么不相信。
解答[1]：每18个月翻一番，意味着3年增加到4倍，9年（2027-2018=9年）将增加到4的三次方即64倍，预计2027年有640亿台主机。
相信，因为连接因特网的除了手机电脑还有电视、智能手表、智能音箱等智能设备，尤其是现在正在发展的Internet of Things（物联网），2027年可能已经进入万物互联时代，每个人、每个家庭的联网设备可能会是至少数十台。

32. 当在两台计算机之间传输一个文件时，可以采用两种不同的确认策略。在第一种策略中，该文件被分解成许多个数据包，接收方独立地确认每一个数据包，但没有对整个文件进行确认。在第二种策略中，这些数据包并没有被单独地确认，但是当整个文件到达接收方时会被确认。请讨论这两种方案。
解答[1]：如果网络容易丢失分组，那么对每个分组逐一进行确认较好，此时仅重传丢失的分组；如果网络高度可靠，那么在不发生差错的情况下，仅在整个文件传送的结尾发送一次确认，从而减少确认的次数，节省了带宽，不过，这种情况即使有单个分组丢失，也需要重传整个文件。

33. 移动电话网络运营商需要知道它们的用户的移动电话（因而知道它们的用户）在哪里。解释一下为什么这对于用户来说很不好。然后再给出为什么这又很好的理由。
解答[3]：不好：移动运营商知道用户的位置意味着用户在哪里睡觉、工作、旅行或者购物都会被知晓，这些信息可能被卖给其他人或者被窃取。
好处：这可以使政府更好的监管城市，另一方面也可以让运营商为用户在正确位置提供帮助，也可以用于防范诈骗，例如有人在不是常驻地区呼叫时。

34. 在原始IEEE 802.3标准中，一比特多长（按米来计算）？请使用10Mb/s传输速率，并且假设同轴电缆的信号传播速度是真空光速的2/3。
解答[3]：同轴电缆的传播速度：200000km/s，即200m/μs。10Mb/s即10bit/μs，所以每10位等于200米，则1bit等于20米。

35. 一幅图像的分辨率为3840×2160像素，每个像素用3B表示。假设该图像没有被压缩。通过56kb/s的调制解调器传输这幅图像需要多长时间？通过1Mb/s的线缆调制解调器呢？通过10Mb/s的以太网呢？通过100Mb/s的以太网呢？通过1000Mb/s的以太网呢？
分析：B：字节，1字节等于8位，即1Bit=8bit；kb：千位，1kb=1000b；Mb：兆位，1Mb=1000000b。
解答[1]：
图像的字节数：3840*2160*3B=24883200B,
转化成位数：24883200*8=199065600，
在56kb/s即56000b/s的速率下，要花：199065600/56000=3554.743秒；
在1Mb/s即1000000b/s的速率下，要花：199065600/1000000=199.066秒；
在10Mb/s的速率下，要花：199065600/10000000=19.907秒；
在100Mb/s的速率下，要花：199065600/100000000=1.991秒；
在1000Mb/s的速率下，要花：199065600/1000000000=0.199秒；

36. 以太网和无线网络既有相同点，也有不同点。以太网的一个特性是同一时刻只能传输一帧数据。IEEE 802.11也具有这个以太网特性吗？请讨论你的答案。
解答[3]：考虑隐藏终端问题，想象1个具有五个顺序站点的无线网络，ABCDE，每个站点的信号作用距离仅在邻居的范围内。这样在同一时间A不知道CDE有没有发消息，同样CDE也不知道A有没有发消息，此时，同一时间A可以与B对话，D也可以与E对话。所以无线网络具有潜在的并行性，这种方式不同于以太网。

37. 无线网络易于安装，这使得它们相对低廉，因为安装成本往往大大超过设备成本。然而，它们也有一些缺点。请给出其中两个缺点。
分析[5]：无线网络的优点：
	灵活性。在无线信号覆盖的任何地方，对于支持无线客户端的设备而言，在获取相应权限的前提下，都可以随时接入此无线网络，这对于有线网络来说是不可能实现的；
	成本和安装。无线网络不需要网线，安装简单；
	扩展性。无线网络能够应用于多种拓扑的网络中，可以通过简便地改变无线配置，而完成不同的功能。
解答[5]：无线网络的缺点：
	性能。无线网络是依靠无线电波进行传输的，这些电波通过无线发射装置进行发射，而建筑物、车辆、树木和其他障碍都可能阻碍电磁波的传输，所以会影响网络的性能；
	速率。无线信道的传输速率与有线信道相比要低得多，目前无线局域网的最大传输速率为802.11ac标准的1.3Gbit/s；
	安全性。无线电波不要求建立物理的连接通道，再加上无线信号是发散的，所以传输信号很容易被监听到，这样会造成通信内容被泄露。

38. 请分别给出网络协议国际标准化之后的两个优点和两个缺点。
解答[1]：
优点：
	如果每个人都使用标准，每个人都可以跟其他任何人交流；
	广泛使用标准会带来规模经济，比如生产大规模集成电路芯片；
缺点：
	为了取得标准化所需要的政治妥协经常导致差的标准；
	一旦标准被广泛采用，要对它进行改变就非常困难，即使发现了新的和更好的技术或方法，也难以替换；
	标准化的过程需要一段时间，当标准被接受的时候，它可能已经是过时的了。

39. 当一个系统既有永久（固定）部分又有可移动部分（比如CD-ROM驱动器和CD-ROM）时，系统的标准化显得非常重要。标准化之后，不同的公司可以分别生产永久部分和可移动部分的产品，而且这些产品总能在一起工作。请给出计算机工业界以外的3个例子，在这3个例子中都有相应的国际标准；再给出计算机工业界以外的另外3个例子，但在这3个例子中都都不存在国际标准。
分析：CD-ROM：只读光盘
解答[1]：具有国际标准的系统的例子：软盘驱动器和软盘，随身听和录音带，照相机和35毫米胶卷，自动出纳机和银行卡片；
不存在国际标准的系统的例子：盒式录像机和录像带（美国是NTSC VHS，欧洲是PAL，其他国家还有SECAM VHS），手提电话，电灯和灯泡（不同的国家使用不同的电压），影印机和纸（在美国是8.5*11英寸，其他地方是A4），螺钉和螺母（英制和公制螺距）。

40. 图1-34显示了TCP/IP网络栈中许多不同的协议。请解释为什么在一层中有多个协议可能是非常有用的，并给出一个例子。

分析：每层都有各自的协议，可以将设计问题分解成各个更小并且更易于管理的小块，也就是，协议可以更改但是不会影响高层或者低层的协议。
解答[7]：每层有多个协议，每个协议负责某种特定的功能，可以根据不同的需求选择不同的协议服务，且当因为技术进步需要更改某一个协议时，也不会影响其他协议的运行。比如在传输层有传输控制协议(TCP)和用户数据报协议(UDP)，当需要可靠传输时，可以选择TCP协议，当应用需要及时交付但是对精确性要求不高时，可以选择UDP协议。

41. 假设实现第k层操作的算法发生了变化。这会影响第k-1层和第k+1层的操作吗？
解答[3]：算法属于协议部分，协议是每层的内部操作，所以k层内部算法发生变化不影响前后层。

42. 假设由第k层提供的服务（一组操作）发生了变化。这会影响第k-1层和第k+1层的服务吗？
解答[3]：不会影响到k-1层，但是会影响到k+1层，k+1层必须重新实现（下层向上层提供服务的特性）。

43. 请了解一下如何打开浏览器内置的网络监视器。将它打开，然后导航到一个Web页面（比如https://www.cs.vu.nl/~ast/）。你的浏览器（客户）向服务器发送了多少个请求？它发送的是什么类型的请求？为什么这些请求是单独发出的，而不是作为一个大的请求发出的？
解答[8][9][10]：Windows10打开网络监视器的方法：https://learn.microsoft.com/zh-cn/troubleshoot/windows-client/networking/collect-data-using-network-monitor
谷歌chrome浏览器内置抓包工具（开发者工具）：
https://blog.csdn.net/chengqiuming/article/details/70140305
chrome开发者工具详解：https://zhuanlan.zhihu.com/p/47697445
在谷歌页面，打开内置抓包工具，搜索“百度”，浏览器大概发送了50个请求，发送的大部分都是text/png/jpeg/ping/script类的请求，每种请求单独发出是里面包含许多超文本（一个页面指向另一个页面），不同的内容可能来源于不同的服务器，所以需要一个一个请求。

44. 列出你每天与使用计算机有关的活动。
解答：可根据自己实际情况自由发挥，如我每天使用邮箱，微信，google chrome浏览器，Bilibili等。

45. ping程序使你能够向指定的位置发送一个测试数据包，看看数据包来回需要多长时间。请用ping程序测试从你所在的位置到几个已知位置需要多长时间。利用这些数据，绘出Internet上的单向传输时间与距离的函数关系。最好使用大学作为目标，因为大学服务器的位置往往可以精确地知道。比如，berkeley.edu在美国加利福尼亚洲的Berkeley，mit.edu在美国马萨诸塞州的剑桥，vu.nl在荷兰的阿姆斯特丹，www.usyd.edu.au在澳大利亚的悉尼，www.uct.ac.za在南非的开普敦。
分析[11]：ping (Packet Internet Groper)，因特网包探索器，用于测试网络连接量的程序。Ping发送一个ICMP；回声请求消息给目的地并报告是否收到所希望的ICMP echo （ICMP回声应答）。它是用来检查网络是否通畅或者网络连接速度的命令。
ping命令通常用来作为网络可用性的检查。ping命令可以对一个网络地址发送测试数据包，看该网络地址是否有响应并统计响应时间，以此测试网络。
ping的原理：
向指定的网络地址发送一定长度的数据包，按照约定，若指定网络地址存在的话，会返回同样大小的数据包，当然，若在特定时间内没有返回，就是“超时”，会被认为指定的网络地址不存在。
解答：直接打开终端，输入ping [网址]即可，如ping berkeley.edu。停止按control+c即可，限定ping次数：ping -c5 berkeley.edu，这里是ping5次，次数可以自己改。收集到足够数据就可以做图了。

46. 访问IETF的网站www.ietf.org，了解它正在做什么。选择你感兴趣的问题，写半页针对该问题的报告，并提出自己的解决方案。
分析[12]：NTP服务器（Network Time Protocol（NTP））是用来使计算机时间同步化的一种协议，它可以使计算机对其服务器或时钟源（如石英钟，GPS等等)做同步化，它可以提供高精准度的时间校正（LAN上与标准间差小于1毫秒，WAN上几十毫秒），且可介由加密确认的方式来防止恶毒的协议攻击。时间按NTP服务器的等级传播。按照离外部UTC源的远近把所有服务器归入不同的Stratum（层）中。
解答：网站www.ietf.org是NTP服务器的官网，正在准备更新NTP协议，将2010年推出的v4更新到v5。更新的动机是吸取经验教训、持续存在的漏洞和新出现的用例。（具体漏洞及更新细节可以到它们官网查看）

47. 在网络领域，标准化是非常重要的。ITU和ISO是主要的官方标准化组织。请浏览它们各自的Web站点：www.itu.org和www.iso.org，了解它们的标准化工作。针对它们已经标准化的各种事情，请写一份简短的报告。
分析：ITU：国际电联；ISO：国际标准化组织
解答：略（可以自己去官网查看）

48. Internet由大量的网络构成。这些网络的布局决定了Internet的拓扑结构。有大量关于Internet拓扑结构的信息可以在线访问到。请用搜索引擎找出更多有关Internet拓扑结构的信息，并根据你的发现写一份简短的报告。
解答：网络拓扑结构信息[14]：星型结构，拓展型拓扑，环型结构，总线型结构，分布式结构，树型结构，网状拓扑结构等
报告[4]：由于计算机和网络技术的发展速度非常之快，因此现在的网络不可能单纯属于某一类网络拓扑结构，而往往是多种网络结构的融合体。在Internet中融合了各种网络拓扑结构，使其成为一个综合性大型网络。

49. 搜索Internet，试找出当前在Internet上路由数据包的一些重要对等节点。
解答[13]：tracert 加上对端IP地址，就可以直接显示了，在终端里面执行。
如tracet www.baidu.com。

50. 写一个程序实现7层协议模型中从顶层到底层的消息流。针对每一层，程序应包括一个单独的协议函数。协议头为64个字符序列。每个协议函数有两个参数：从高层协议传递下来的消息（一个字符缓冲区）和消息的大小。这个函数在消息前面加一个头，并在标准输出上打印新的消息，然后调用较低层协议的协议函数。程序的输入是一个应用程序的消息。
解答：
Python实现如下：






